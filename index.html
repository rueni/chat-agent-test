<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"/>
    <title>Customer Support</title>
  </head>
  <body>
    <style type="text/css">
      .embeddedServiceHelpButton .embeddedServiceIcon {
        display: inline-block !important;
      }
      .embeddedServiceHelpButton .helpButton .uiButton {
        background-color: #005290;
        font-family: "Salesforce Sans", sans-serif;
      }
      .embeddedServiceHelpButton .helpButton .uiButton:focus {
        outline: 1px solid #005290;
      }
      .embeddedServiceSidebarMinimizedDefaultUI.helpButton {
        background-color: #005290;
        font-family: "Salesforce Sans", sans-serif;
        box-shadow: 0 0 12px 0 rgba(0, 0, 0, 0);
      }
      .embeddedServiceSidebarMinimizedDefaultUI.minimizedContainer:focus,
      .embeddedServiceSidebarMinimizedDefaultUI.minimizedContainer:hover,
      .embeddedServiceSidebarMinimizedDefaultUI.minimizedContainer:active {
        background-color: #005290;
      }
      /* Hide the First and Last Name Fields that have both the classes */
      .embeddedServiceSidebarFormField.inputSplitName {
        display: none !important;
      }
      .plaintextContent.agent.embeddedServiceLiveAgentStateChatPlaintextMessageDefaultUI {
        border-radius: 0px 8px 8px 8px;
        background: #faf8f2;
      }
      .plaintextContent.chasitor.embeddedServiceLiveAgentStateChatPlaintextMessageDefaultUI {
        border-radius: 8px 0px 8px 8px;
        border: 1px solid var(--neutral-20, #e5e5e6);
        background: #fff;
        color: var(--theme-charcoal, #4d4d4d);
      }
      .embeddedServiceLiveAgentStateChatAvatar.isLightningOutContext
        .agentIconColor0 {
        background-color: #ff612b;
      }
      @font-face {
        font-family: "Salesforce Sans";
        src: url("https://c1.sfdcstatic.com/etc/clientlibs/sfdc-aem-master/clientlibs_base/fonts/SalesforceSans-Regular.woff")
            format("woff"),
          url("https://c1.sfdcstatic.com/etc/clientlibs/sfdc-aem-master/clientlibs_base/fonts/SalesforceSans-Regular.ttf")
            format("truetype");
      }
    </style>

    <script type="text/javascript" src="https://service.force.com/embeddedservice/5.0/esw.min.js"></script>
    <script type="text/javascript">
      var initESW = function (gslbBaseURL) {
        embedded_svc.settings.displayHelpButton = true; //Or false
        embedded_svc.settings.language = ""; //For example, enter 'en' or 'en-US'
        embedded_svc.settings.enabledFeatures = ["LiveAgent"];
        embedded_svc.settings.entryFeature = "LiveAgent";
        embedded_svc.settings.displayHelpButton = true; //Or false
        embedded_svc.settings.language = ""; //For example, enter 'en' or 'en-US'
        embedded_svc.settings.enabledFeatures = ["LiveAgent"];
        embedded_svc.settings.entryFeature = "LiveAgent";
        embedded_svc.settings.defaultMinimizedText = "Chat"
        
        embedded_svc.settings.prepopulatedPrechatFields = {
          Web_First_Name__c: "Chris",
          Web_Last_Name__c: "Kim",
          Program_Type__c: "One Pass - Government",
          HealthSafe_Id__c: "1234567",
          Enterprise_Id__c: "98765432",
          Rally_UID_Optum__c: "1234567890",
          Web_Affiliation__c: "chris_kim_test_affiliation",
          Web_Client__c: "chris_kim_test_client",
          Sub_Origin__c: "One Pass Help Center",
          Web_Date_of_Birth__c: "1995-10-12"
        };

        embedded_svc.settings.extraPrechatFormDetails = [
          {label: "First Name", transcriptFields: ["Pre_Chat_Contact_First_Name__c"]},
          {label: "Last Name", transcriptFields: ["Pre_Chat_Contact_Last_Name__c"]},
          {label: "Email Address", transcriptFields: ["Pre_Chat_Contact_Email_Address__c"]},
          {label: "Date of Birth", transcriptFields: ["Pre_Chat_Contact_DOB__c"]},
          {label: "Phone", transcriptFields: ["Pre_Chat_Contact_Phone__c"]}
        ];

        document.addEventListener(
          "setCustomField",
          function (event) {
            embedded_svc.settings.extraPrechatFormDetails[0].value = event.detail.firstName;
            embedded_svc.settings.extraPrechatFormDetails[1].value = event.detail.lastName;
            embedded_svc.settings.extraPrechatFormDetails[2].value = event.detail.emailAddress;
            embedded_svc.settings.extraPrechatFormDetails[3].value = event.detail.dateOfBirth;
            embedded_svc.settings.extraPrechatFormDetails[4].value = event.detail.phone;
            event.detail.callback();
          },
          false
        );

        embedded_svc.settings.extraPrechatInfo = [
          {
            entityFieldMaps: [
              {
                doCreate: false,
                doFind: false,
                fieldName: "LastName",
                isExactMatch: true,
                label: "Last Name",
              },
              {
                doCreate: false,
                doFind: false,
                fieldName: "FirstName",
                isExactMatch: true,
                label: "First Name",
              },
            ],
            entityName: "Contact",
          },
        ];

        embedded_svc.init(
          "https://rallyhealth--rallyfull.sandbox.my.salesforce.com",
          "https://rallyhealth--rallyfull.sandbox.my.site.com/customer",
          gslbBaseURL,
          "00D6t0000004eui",
          "One_Pass_Chat",
          {
            baseLiveAgentContentURL:"https://c.la4-c1cs-ia4.salesforceliveagent.com/content",
            deploymentId: "5726t0000004IR7",
            buttonId: "5736t0000004Icm",
            baseLiveAgentURL:"https://d.la4-c1cs-ia4.salesforceliveagent.com/chat",
            eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04IDj0000004CS5MAM_189f9c27ecf",
            isOfflineSupportEnabled: false,
          }
        );
      };

      if (!window.embedded_svc) {
        var s = document.createElement("script");
        s.setAttribute("src","https://rallyhealth--rallyfull.sandbox.my.salesforce.com/embeddedservice/5.0/esw.min.js");
        s.onload = function () {
          initESW(null);
        };
        document.body.appendChild(s);
      } else {
        initESW("https://service.force.com");
      }
    </script>
  </body>
</html>
